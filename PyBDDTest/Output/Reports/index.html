<!DOCTYPE html>
  <html ng-app="BDDReport">
    <head>
      <!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
        <script src="report_buffer.js"></script>
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css" media="screen,projection">


      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

      <style>
            code {
              display: block;
              white-space: pre-wrap
            }

      </style>

    </head>

    <body ng-controller="ReportController">
            <nav class="nav-extended">
                <div class="nav-wrapper blue darken-4">
                <a href="#" class="brand-logo center">BDD Test Report</a>
                <ul id="nav-mobile" class="left hide-on-med-and-down">
                    <li><a href="#">Dashboard</a></li>
                    <li><a href="#">Test Cases</a></li>
                    <li><a href="#">Reports</a></li>
                </ul>
                </div>
                <div class="nav-content blue darken-1">
                  <ul id="tabs-swipe-demo" class="tabs tabs-transparent">
                    <!--<li class="tab"><a href="#test-swipe-Summary">Summary</a></li>-->
                    <li class="tab" ng-repeat="fd in arrReports"><a href="#test-swipe-{{$index+1}}">Feature {{$index+1}}</a></li>
                    <!--<li class="tab"><a class="active" href="#test2">Feature 2</a></li>-->
                    <!--<li class="tab"><a href="#test3">Feature 3</a></li>-->
                  </ul>
                </div>
            </nav>


        <!-- main page content  -->


     <!--Summary        -->
     <!--<div id="test-swipe-Summary">Test Summary </div>-->

    <!--One Feature wise -->

    <div id="test-swipe-{{$index+1}}" ng-repeat="fd in arrReports">

        <div class="row container">



      <div class="card blue-grey darken-1 hoverable">
        <div class="card-content white-text">
          <span class="card-title">Feature Summary</span>
          <ul class="collection with-header blue-grey darken-1">
        <li class="collection-header blue-grey darken-1"><h4>{{fd.name}}</h4></li>
        <li class="collection-item blue-grey darken-1">Status : <span style='font-size: 14pt;' class="new badge" data-badge-caption="" ng-class="{'passed':'green', 'failed':'red'}[fd.status]">{{fd.status}}</span></li>
        <!--<li class="collection-item blue-grey darken-1">Location : {{fd.location}}</li>-->
        <!--<li class="collection-item blue-grey darken-1">Tags : {{fd.tags}}</li>-->
     <!--</ul>-->
        <!--</div>-->
      <!--</div>-->



      <!--<ul class="collection blue-grey lighten-4 hoverable">-->
         <!--<div class="row container ">-->
        <li class="collection-item center blue-grey darken-1" style="font-size:22px;">Scenario Count : {{fd.Passed+fd.Failed+fd.Skipped}}</li>
        <li class="col s4 green" style="font-size:18px;">Passed Scenarios : {{fd.Passed}}</li>
        <li class="col s4 red" style="font-size:18px;">Failed Scenarios : {{fd.Failed}}</li>
        <li class="col s4 blue" style="font-size:18px;">Skipped Scenarios : {{fd.Skipped}}</li>
         <!--</div>-->
      </ul>
        </div>
      </div>
    <hr class="divider"></hr>

        <h4 class="header center">Scenarios</h4>


          <ul class="collapsible popout expandable">
            <li ng-repeat="rd in RData[$index]">
                <div class="collapsible-header"><i class="material-icons">loupe</i>{{rd.name}}<span style='font-size: 12pt;' class="new badge" data-badge-caption="" ng-class="{'failed':'red','passed':'green'}[rd.status]">{{rd.status==Null ? 'skipped': rd.status}}</span></div>
              <div class="collapsible-body card-panel blue-grey darken-1" >
                <div class="row container ">
                <ul class="collection" >
                    <li class="collection-item">Type :{{rd.type}}</li>
                    <li class="collection-item">Location :{{rd.location}}</li>
                    <li class="collection-item">Tags :{{rd.tags}}</li>
                </ul>
              </div>

              <div class="row">
                <ul class="collapsible popout expandable">
                  <li ng-repeat="rdone in rd['steps']">
                    <div class="collapsible-header"><i class="material-icons">directions</i>{{rdone.keyword}} {{rdone.name}}<span class="new badge" data-badge-caption="" ng-class="{'passed':'green', 'failed':'red'}[rdone.result.status]">{{rdone.result.status==undefined ? 'Skipped': rdone.result.status}}</span></div>
                    <div class="collapsible-body">
                      
                        <div class="row container">
                            <ul class="collection">
                                <li class="collection-item">Step Type :{{rdone.step_type}}</li>
                                <li class="collection-item">Location :{{rdone.location}}</li>
                                <li class="collection-item">Duration :{{rdone.result.duration}}</li>
                                <li class="collection-item" ng-repeat="aritem in rdone.match.arguments">{{aritem.name}} : {{aritem.value}}</li>
                                <li class="collection-item">Error Message :
                                    <code>{{rdone.result.error_message}}</code>

                                </li>
                            </ul>
                          </div>
                    
                    
                    </div>
                  
                  
                  </li>

                </ul>
              </div>

            </div>

            </li>


          </ul>
        </div>
    </div>


        <!-- <div class="card">
                <div class="card-content">
                  <p>I am a very simple card. I am good at containing small bits of information. I am convenient because I require little markup to use effectively.</p>
                </div>
                <div class="card-tabs">
                  <ul class="tabs tabs-fixed-width">
                    <li class="tab"><a href="#test4">Test 1</a></li>
                    <li class="tab"><a class="active" href="#test5">Test 2</a></li>
                    <li class="tab"><a href="#test6">Test 3</a></li>
                  </ul>
                </div>
                <div class="card-content grey lighten-4">
                  <div id="test4">Test 1</div>
                  <div id="test5">Test 2</div>
                  <div id="test6">Test 3</div>
                </div>
              </div>

 -->





              <!-- All scripts and imports of body below -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <!-- Compiled and minified JavaScript -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    <script>



        $(document).ready(function(){
            $('.collapsible').collapsible();
            var elem = document.querySelector('.collapsible.expandable');
            var instance = M.Collapsible.init(elem, {
            accordion: false
            });
            $('.tabs').tabs();
        });
        

      </Script>

    <script>
    // angular code
        // Define the `BDDReport` module
        var BDDReport = angular.module('BDDReport', []);

        // Define the `ReportController` controller on the `BDDReport` module
        BDDReport.controller('ReportController', function ReportController($scope, $http) {
          $scope.TCs = [
            {
              name: 'Nexus S',
              result: 'Fast just got faster with Nexus S.'
            }, {
              name: 'Motorola XOOM™ with Wi-Fi',
              result: 'The Next, Next Generation tablet.'
            }, {
              name: 'MOTOROLA XOOM™',
              result: 'The Next, Next Generation tablet.'
            }
          ];

    
        $scope.arrReports = RDReports;
        $scope.RData = [];
        $scope.FeatureCount= $scope.arrReports.length;

        angular.forEach($scope.arrReports,function(f){
            var pcount=0;
            var fcount=0;
            var scount=0;
            angular.forEach(f.elements, function(el){
                if (el.status == "skipped"){
                    scount++;
                }else if(el.status=="passed"){
                    pcount++;
                }else if(el.status=="failed"){
                    fcount++;
                }
            })
            f.Passed=pcount;
            f.Failed=fcount;
            f.Skipped=scount;
            <!--console.log(f.Passed);-->
            <!--console.log(count);-->
        })
        <!--console.log($scope.arrReports[2].Passed);-->


        for (var j = 0; j <  $scope.FeatureCount; j++){
             $scope.RData.push($scope.arrReports[j]["elements"]);
        };


        });

    </script>

    </body>
  </html>
